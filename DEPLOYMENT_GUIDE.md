# ğŸš€ OptimizedPancakeRouter éƒ¨ç½²æŒ‡å—

## ğŸ“‹ éƒ¨ç½²å‰å‡†å¤‡

### 1. ç¯å¢ƒè®¾ç½®
```bash
# 1. å…‹éš†æˆ–ä¸‹è½½é¡¹ç›®
# 2. å®‰è£…ä¾èµ–
npm install

# 3. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
```

### 2. é…ç½® .env æ–‡ä»¶
```bash
# å¿…éœ€é…ç½®
PRIVATE_KEY=ä½ çš„é’±åŒ…ç§é’¥                    # ç”¨äºéƒ¨ç½²çš„é’±åŒ…ç§é’¥
BSCSCAN_API_KEY=ä½ çš„BSCScan_APIå¯†é’¥        # ç”¨äºåˆçº¦éªŒè¯

# å¯é€‰é…ç½®
FEE_RECIPIENT=0xE1c727B62cF1ed816587E1005790f9E30299bf88  # æ‰‹ç»­è´¹æ¥æ”¶åœ°å€ (å·²é¢„è®¾)
FEE_RATE=30                                # æ‰‹ç»­è´¹ç‡ (30 = 0.3%)
```

**æ³¨æ„**: 
- æ‰‹ç»­è´¹æ¥æ”¶åœ°å€å·²è®¾ç½®ä¸º `0xE1c727B62cF1ed816587E1005790f9E30299bf88`
- å¦‚éœ€ä¿®æ”¹ï¼Œè¯·åœ¨ `.env` æ–‡ä»¶ä¸­è®¾ç½® `FEE_RECIPIENT` å˜é‡
- æ‰‹ç»­è´¹ç‡é»˜è®¤ä¸º 0.3%ï¼Œå¯é€šè¿‡ `FEE_RATE` å˜é‡ä¿®æ”¹

### 3. ç¡®ä¿é’±åŒ…ä½™é¢å……è¶³
- **BSC ä¸»ç½‘**: è‡³å°‘ 0.1 BNB ç”¨äºéƒ¨ç½²
- **BSC æµ‹è¯•ç½‘**: è‡³å°‘ 0.1 tBNB ç”¨äºéƒ¨ç½² (å¯ä»æ°´é¾™å¤´è·å–)

## ğŸ¯ éƒ¨ç½²æ­¥éª¤

### æ–¹æ¡ˆ 1: éƒ¨ç½²åˆ° BSC æµ‹è¯•ç½‘ (æ¨èæ–°æ‰‹)
```bash
# 1. ç¼–è¯‘åˆçº¦
npx hardhat compile

# 2. éƒ¨ç½²åˆ°æµ‹è¯•ç½‘
npx hardhat run scripts/deploy.js --network bscTestnet

# 3. éªŒè¯éƒ¨ç½²
npx hardhat run scripts/verify-deployment.js --network bscTestnet

# 4. éªŒè¯æºç  (å¯é€‰)
npx hardhat verify --network bscTestnet <åˆçº¦åœ°å€> <æ„é€ å‚æ•°>
```

### æ–¹æ¡ˆ 2: éƒ¨ç½²åˆ° BSC ä¸»ç½‘ (ç”Ÿäº§ç¯å¢ƒ)
```bash
# 1. ç¼–è¯‘åˆçº¦
npx hardhat compile

# 2. éƒ¨ç½²åˆ°ä¸»ç½‘ (è¯·å†æ¬¡ç¡®è®¤é…ç½®!)
npx hardhat run scripts/deploy.js --network bsc

# 3. éªŒè¯éƒ¨ç½²
npx hardhat run scripts/verify-deployment.js --network bsc

# 4. éªŒè¯æºç 
npx hardhat verify --network bsc <åˆçº¦åœ°å€> <æ„é€ å‚æ•°>
```

### æ–¹æ¡ˆ 3: æœ¬åœ°æµ‹è¯• (å¼€å‘è°ƒè¯•)
```bash
# 1. å¯åŠ¨æœ¬åœ°èŠ‚ç‚¹
npx hardhat node

# 2. åœ¨æ–°ç»ˆç«¯éƒ¨ç½²
npx hardhat run scripts/deploy.js --network localhost

# 3. è¿è¡Œå®Œæ•´æµ‹è¯•
npm test
```

## ğŸ“Š éƒ¨ç½²è¾“å‡ºè¯´æ˜

éƒ¨ç½²æˆåŠŸåï¼Œæ‚¨å°†çœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š
```
ğŸš€ å¼€å§‹éƒ¨ç½² OptimizedPancakeRouter...
ğŸ“¡ ç½‘ç»œ: bsc (Chain ID: 56)
ğŸ‘¤ éƒ¨ç½²è´¦æˆ·: 0x1234...
ğŸ’° è´¦æˆ·ä½™é¢: 1.5 BNB
â›½ ä¼°ç®— gas: 2,275,006
   Gas ä»·æ ¼: 3.0 gwei
   é¢„ä¼°æˆæœ¬: 0.006825018 BNB
ğŸ”¨ å¼€å§‹éƒ¨ç½²åˆçº¦...
â³ ç­‰å¾…éƒ¨ç½²äº¤æ˜“ç¡®è®¤...
âœ… åˆçº¦éƒ¨ç½²æˆåŠŸ!
   åˆçº¦åœ°å€: 0xabcd1234...
   éƒ¨ç½²æ—¶é—´: 25000ms
   äº¤æ˜“å“ˆå¸Œ: 0xdef5678...
ğŸ“Š åˆçº¦çŠ¶æ€éªŒè¯:
   âœ… Owner: 0x1234...
   âœ… Fee Rate: 30% (0.3%)
   âœ… Fee Recipient: 0x1234...
   âœ… V2 Router: 0x10ED43C718714eb63d5aA57B78B54704E256024E
   âœ… V3 Router: 0x1b81D678ffb9C0263b24A97847620C99d213eB14
   âœ… WETH: 0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c
ğŸ’¾ éƒ¨ç½²ä¿¡æ¯å·²ä¿å­˜åˆ°: deployments/bsc-deployment.json

ğŸ”— åˆçº¦éªŒè¯å‘½ä»¤:
npx hardhat verify --network bsc 0xabcd1234... "0x10ED..." "0x1b81..." "0xbb4C..." 30 "0x1234..."

ğŸŒ æµè§ˆå™¨æŸ¥çœ‹:
https://bscscan.com/address/0xabcd1234...

ğŸ‰ éƒ¨ç½²å®Œæˆ!
```

## ğŸ“ éƒ¨ç½²æ–‡ä»¶è¯´æ˜

éƒ¨ç½²æˆåŠŸåä¼šç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š
```
deployments/
â”œâ”€â”€ bsc-deployment.json          # BSC ä¸»ç½‘éƒ¨ç½²ä¿¡æ¯
â”œâ”€â”€ bscTestnet-deployment.json   # BSC æµ‹è¯•ç½‘éƒ¨ç½²ä¿¡æ¯
â””â”€â”€ hardhat-deployment.json     # æœ¬åœ°éƒ¨ç½²ä¿¡æ¯
```

éƒ¨ç½²ä¿¡æ¯åŒ…å«ï¼š
- åˆçº¦åœ°å€
- éƒ¨ç½²è€…åœ°å€  
- éƒ¨ç½²æ—¶é—´
- äº¤æ˜“å“ˆå¸Œ
- æ„é€ å‚æ•°
- ç½‘ç»œä¿¡æ¯

## ğŸ”§ éªŒè¯ä¸ä½¿ç”¨

### 1. åŠŸèƒ½éªŒè¯
```bash
# éªŒè¯åˆçº¦åŠŸèƒ½æ­£å¸¸
npx hardhat run scripts/verify-deployment.js --network <network>
```

### 2. æºç éªŒè¯
```bash
# åœ¨åŒºå—é“¾æµè§ˆå™¨ä¸ŠéªŒè¯æºç 
npx hardhat verify --network <network> <contract_address> <constructor_args>
```

### 3. åˆçº¦äº¤äº’
```javascript
// åœ¨ DApp ä¸­ä½¿ç”¨
const router = new ethers.Contract(contractAddress, abi, signer);

// V2 äº¤æ¢
await router.swapV2ExactTokensForTokens(
  amountIn,
  amountOutMin, 
  [tokenA, tokenB],
  recipient,
  deadline
);

// V3 äº¤æ¢
await router.swapV3ExactInputSingle(
  tokenIn,
  tokenOut,
  fee,
  recipient,
  deadline,
  amountIn,
  amountOutMin,
  0
);
```

## âš ï¸ å®‰å…¨æé†’

### éƒ¨ç½²å‰æ£€æŸ¥æ¸…å•:
- [ ] ç§é’¥å®‰å…¨å­˜å‚¨ï¼Œä¸è¦æ³„éœ²
- [ ] ç¡®è®¤ç½‘ç»œé…ç½®æ­£ç¡® (ä¸»ç½‘/æµ‹è¯•ç½‘)
- [ ] æ£€æŸ¥é’±åŒ…ä½™é¢å……è¶³
- [ ] ç¡®è®¤æ‰‹ç»­è´¹æ¥æ”¶åœ°å€æ­£ç¡®
- [ ] åœ¨æµ‹è¯•ç½‘å…ˆè¡Œæµ‹è¯•
- [ ] å¤‡ä»½éƒ¨ç½²ä¿¡æ¯æ–‡ä»¶

### ä¸»ç½‘éƒ¨ç½²æ³¨æ„:
- ğŸ” ä½¿ç”¨ç¡¬ä»¶é’±åŒ…æˆ–å®‰å…¨çš„ç§é’¥ç®¡ç†
- ğŸ§ª å…ˆåœ¨æµ‹è¯•ç½‘å®Œæ•´æµ‹è¯•æ‰€æœ‰åŠŸèƒ½
- ğŸ’° å‡†å¤‡å……è¶³çš„ BNB ç”¨äºéƒ¨ç½²å’Œåç»­æ“ä½œ
- ğŸ“ å¤‡ä»½æ‰€æœ‰é‡è¦ä¿¡æ¯
- ğŸ” éƒ¨ç½²åç«‹å³éªŒè¯æºç 

## ğŸ†˜ å¸¸è§é—®é¢˜

### Q: éƒ¨ç½²å¤±è´¥ "insufficient funds"
A: é’±åŒ… BNB ä½™é¢ä¸è¶³ï¼Œè¯·å……å€¼åé‡è¯•

### Q: éƒ¨ç½²å¤±è´¥ "nonce too low/high"  
A: ç½‘ç»œæ‹¥å µæˆ– nonce å†²çªï¼Œç­‰å¾…å‡ åˆ†é’Ÿåé‡è¯•

### Q: éªŒè¯å¤±è´¥ "already verified"
A: åˆçº¦å·²ç»éªŒè¯è¿‡ï¼Œæ— éœ€é‡å¤éªŒè¯

### Q: åˆçº¦åœ°å€åœ¨æµè§ˆå™¨æ˜¾ç¤ºä¸å­˜åœ¨
A: ç­‰å¾…å‡ ä¸ªåŒºå—ç¡®è®¤ï¼Œæˆ–æ£€æŸ¥ç½‘ç»œé…ç½®æ˜¯å¦æ­£ç¡®

### Q: å¦‚ä½•è·å–æµ‹è¯•ç½‘ BNB?
A: è®¿é—® BSC æµ‹è¯•ç½‘æ°´é¾™å¤´: https://testnet.binance.org/faucet-smart

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°éƒ¨ç½²é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
2. ç§é’¥å’Œ API å¯†é’¥æ˜¯å¦æ­£ç¡®é…ç½®
3. é’±åŒ…ä½™é¢æ˜¯å¦å……è¶³
4. åˆçº¦ä»£ç æ˜¯å¦ç¼–è¯‘æˆåŠŸ

---

ğŸ‰ **ç¥æ‚¨éƒ¨ç½²æˆåŠŸï¼åˆçº¦éƒ¨ç½²åå³å¯ç”¨äºçœŸå®äº¤æ˜“æµ‹è¯•ã€‚**
